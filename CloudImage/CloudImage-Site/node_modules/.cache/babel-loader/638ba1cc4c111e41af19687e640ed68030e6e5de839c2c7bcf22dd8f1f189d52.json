{"ast":null,"code":"import{useState,useCallback}from'react';import{useNavigate}from\"react-router-dom\";import Gallery from'react-photo-gallery';import{userImages}from'./images';import{NavBar}from'./home';import Carousel,{Modal,ModalGateway}from'react-images';import{useAuth}from'./authContext';import\"./gallery.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function MyGallery(){const{isLoggedIn}=useAuth();if(!isLoggedIn){window.alert(\"Please login or create an account first\");}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(Title,{}),/*#__PURE__*/_jsx(\"div\",{className:\"gallary_container\",children:isLoggedIn?/*#__PURE__*/_jsx(MainContent,{}):/*#__PURE__*/_jsx(\"h2\",{children:\"Please login first\"})})]})});}function Title(){const[file,setFile]=useState(null);async function uploadImage(e){setFile(e.target.files[0]);const url=process.env.REACT_APP_API_BASE_URL+\"/user/\"+localStorage.getItem('username')+\"/images\";const header={'Authorization':localStorage.getItem('session_token')};try{const formData=new FormData();formData.append('file',e.target.files[0]);const response=await fetch(url,{method:'POST',body:formData,headers:header});console.log(response);location.reload();}catch(error){console.error(error);}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"header\",{className:\"hero\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"My Gallery\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upload\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"filename\",accept:\".jpg, .jpeg, .png\",onChange:e=>uploadImage(e)}),/*#__PURE__*/_jsx(\"img\",{src:\"upload.svg\"}),file==null?\"Select File\":file.name]})})]})});}function MainContent(){const images=userImages();const[Caropened,setCaropened]=useState(false);const[Currimg,setCurrimg]=useState(0);function imageRenderer(_ref){let{index=0,key='key',photo={}}=_ref;return/*#__PURE__*/_jsx(\"img\",{className:\"thumbnail\",index:index,src:photo.src,width:photo.width,height:photo.height,onClick:()=>openLightbox(index,photo)},key);}function openLightbox(index,photo){setCaropened(true);setCurrimg(index);}function closeLightbox(){setCaropened(false);}if(images.length==0){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Upload Your First Picture\"})})});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(Gallery,{photos:images,renderImage:imageRenderer,direction:\"row\"}),/*#__PURE__*/_jsx(ModalGateway,{children:Caropened?/*#__PURE__*/_jsx(Modal,{onClose:closeLightbox,children:/*#__PURE__*/_jsx(Carousel,{currentIndex:Currimg,views:images.map(x=>({...x,srcset:x.srcSet}))})}):null})]})});}","map":{"version":3,"names":["useState","useCallback","useNavigate","Gallery","userImages","NavBar","Carousel","Modal","ModalGateway","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyGallery","isLoggedIn","window","alert","children","className","Title","MainContent","file","setFile","uploadImage","e","target","files","url","process","env","REACT_APP_API_BASE_URL","localStorage","getItem","header","formData","FormData","append","response","fetch","method","body","headers","console","log","location","reload","error","type","name","accept","onChange","src","images","Caropened","setCaropened","Currimg","setCurrimg","imageRenderer","_ref","index","key","photo","width","height","onClick","openLightbox","closeLightbox","length","photos","renderImage","direction","onClose","currentIndex","views","map","x","srcset","srcSet"],"sources":["C:/Users/Arian/Documents/project/CIM-Project/client/website/src/gallery.js"],"sourcesContent":["import { useState, useCallback } from 'react'; \r\nimport { useNavigate } from \"react-router-dom\"; \r\nimport Gallery from 'react-photo-gallery';\r\nimport {userImages} from './images'; \r\nimport {NavBar} from './home'; \r\nimport Carousel, { Modal, ModalGateway }  from 'react-images'; \r\nimport { useAuth } from './authContext'; \r\nimport \"./gallery.css\"; \r\n\r\nexport default function MyGallery() { \r\n    const { isLoggedIn } = useAuth(); \r\n    if(!isLoggedIn){ \r\n        window.alert(\"Please login or create an account first\"); \r\n    } \r\n    return (\r\n        <> \r\n            <div className='main'> \r\n                <NavBar></NavBar>\r\n                <Title></Title> \r\n                <div className='gallary_container'> \r\n                    {isLoggedIn?<MainContent></MainContent>:<h2 >Please login first</h2>} \r\n                </div>\r\n            </div> \r\n        </>); \r\n} \r\n\r\nfunction Title(){ \r\n    const [file,setFile] = useState(null); \r\n    async function uploadImage(e){ \r\n        setFile(e.target.files[0]); \r\n        const url = process.env.REACT_APP_API_BASE_URL + \"/user/\"+localStorage.getItem('username')+\"/images\"; \r\n        const header = { \r\n            'Authorization': localStorage.getItem('session_token')\r\n        }; \r\n        try {\r\n            const formData = new FormData(); \r\n            formData.append('file', e.target.files[0]); \r\n            const response = await fetch(url, {\r\n                method: 'POST',\r\n                body: formData, \r\n                headers: header\r\n            }); \r\n            console.log(response); \r\n            location.reload(); \r\n        } catch (error) {\r\n            console.error(error);\r\n        } \r\n    } \r\n    return (<> \r\n                <header className=\"hero\"><p>My Gallery</p> \r\n                    <div className='upload'> \r\n                        <label> \r\n                            <input type=\"file\" name=\"filename\" accept=\".jpg, .jpeg, .png\" onChange={(e)=>uploadImage(e)}/> \r\n                            <img src='upload.svg'/> \r\n                            {(file==null)? \"Select File\":file.name}  \r\n                        </label>\r\n                        {/* <button type='submit' onClick={(uploadImage)}>Upload</button>  */}\r\n                    </div> \r\n                </header> \r\n            </>); \r\n} \r\n\r\nfunction MainContent(){ \r\n    const images = userImages(); \r\n    const [Caropened,setCaropened] = useState(false); \r\n    const [Currimg, setCurrimg] = useState(0); \r\n    function imageRenderer({ index=0, key='key', photo={}}){ \r\n        return ( \r\n        <img \r\n            className='thumbnail'\r\n            index={index} \r\n            key={key}\r\n            src={photo.src} \r\n            width={photo.width} \r\n            height={photo.height} \r\n            onClick={()=>openLightbox(index,photo)} \r\n        /> \r\n    );} \r\n\r\n    function openLightbox(index,photo){ \r\n        setCaropened(true); \r\n        setCurrimg(index); \r\n    } \r\n    function closeLightbox(){ \r\n        setCaropened(false); \r\n    }\r\n\r\n    if (images.length==0){ \r\n        return (<> \r\n            <div className='content'> \r\n                <h2>Upload Your First Picture</h2> \r\n            </div> \r\n        </>); \r\n    } \r\n    \r\n    return (<> \r\n                <div className='content'> \r\n                    <Gallery photos={images} renderImage={imageRenderer} direction='row'/>\r\n                    <ModalGateway>\r\n                    {Caropened ? (\r\n                    <Modal onClose={closeLightbox}>\r\n                        <Carousel\r\n                        currentIndex={Currimg} \r\n                        views={images.map(x => ({\r\n                            ...x,\r\n                            srcset: x.srcSet,\r\n                        }))} \r\n                        />\r\n                    </Modal>\r\n                    ) : null}\r\n                </ModalGateway> \r\n                </div> \r\n            </>); \r\n} \r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}